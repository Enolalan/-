#+TITLE: 日志管理与分析
#+AUTHOR: lujun9972
#+CATEGORY: linux
#+DATE: [2015-11-02 一 07:21]
#+OPTIONS: ^:{}

* 消息日志的几种通用类型
+ 消息 :: 这类信息告诉用户和管理员一些 *没有* 风险的事情发生了
+ 调试 :: 软件系统在应用程序代码运行时生成调试信息,是为了给软件开发人员提供故障检测和定位问题的帮助
+ 警告 :: 警告信息表示有异常情况出现,但并未产生影响
+ 错误 :: 错误信息表示有异常情况出现,且产生了影响,需要立即处理.

* 常见的日志传输机制
+ syslog UDP
+ syslog TCP
+ 加密syslog
+ SOAP over HTTP
+ SNMP
+ 传统的文件传输方式

* 常见的日志格式
+ W3C扩展日志文件格式
+ Apache访问日志
+ Cisco SDEE/CIDEE
+ ArcSight公共事件格式
+ syslog(RFC3195和更新的RFC5424)
+ IDMEF

** 良好日志的标准
通常来说,日志应该能告诉你如下信息
+ what :: 发生了什么
+ when :: 发生于何时
+ who :: 谁参与其中
+ where :: 发生于何处,参与者来源

** 日志常包含如下字段
+ 日期/时间/时区
+ 日志条目的类型
+ 产生该日志的系统
+ 产生该日志的应用程序/组件
+ 成功或失败的指示
+ 日志信息的严重性,优先级和重要性
+ 和该日志相关的用户活动,也可记录用户名, *但一般不记录用户信息之类的敏感信息*
+ 唯一的会话ID,这有助于集合不同线程和进程产生的相关日志
+ 进程ID和线程ID

** 不好的日志格式
+ 遗漏了时间戳和时区
+ 有神秘数字,却无神秘数字解释的文档
+ 描述模糊或没有描述
+ 网络链接没有源/目标IP,没有源/目标端口
+ 没有唯一的信息标识符
+ 没有唯一的信息类型标识符

* 日志收集法则
+ 收集法则 :: 不要搜集从不计划使用的日志
+ 留存法则 :: 只要觉得有可能用到,就尽量长时间地留存日志数据
+ 监控法则 :: 记录需要记录的一切信息,但只有在你必须响应时才发出警报
+ 可用性法则 :: 不要花费精力,将你的日志或监控系统的可用性提高到超过业务系统的水平
+ 安全性法则 :: 不要花费比保护关键业务数据更多的精力去保护你的日志数据
+ 不断变化法则 :: 系统必须持续审核日志审核策略,规章和运营任何及系统配置.
