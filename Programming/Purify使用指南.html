<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Purify使用指南</title>
<!-- 2014-09-18 星期四 21:26 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="DarkSun" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Purify使用指南</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. 简介</a></li>
<li><a href="#sec-2">2. 安装</a>
<ul>
<li><a href="#sec-2-1">2.1. 安装license</a></li>
<li><a href="#sec-2-2">2.2. 安装Purify</a></li>
</ul>
</li>
<li><a href="#sec-3">3. 使用</a>
<ul>
<li><a href="#sec-3-1">3.1. 查看帮助</a></li>
<li><a href="#sec-3-2">3.2. 使用步骤&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></a></li>
<li><a href="#sec-3-3">3.3. 查看BUG&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></a></li>
<li><a href="#sec-3-4">3.4. 定位BUG在源代码中的位置&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></a></li>
<li><a href="#sec-3-5">3.5. 查找泄漏的内存&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></a></li>
<li><a href="#sec-3-6">3.6. 修改BUG&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></a></li>
<li><a href="#sec-3-7">3.7. 隐藏消息&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></a></li>
</ul>
</li>
<li><a href="#sec-4">4. 保存/载入结果</a>
<ul>
<li><a href="#sec-4-1">4.1. 保存结果</a></li>
<li><a href="#sec-4-2">4.2. 载入结果</a></li>
</ul>
</li>
<li><a href="#sec-5">5. API</a></li>
<li><a href="#sec-6">6. 命令选项</a>
<ul>
<li><a href="#sec-6-1">6.1. Build-time options</a></li>
<li><a href="#sec-6-2">6.2. Runtime options</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> 简介</h2>
<div class="outline-text-2" id="text-1">
<p>
Purify是IBM开发的，用于定位C、C++代码中bug和内存泄漏位置的自动化工具。
</p>

<p>
Purify的特点有：
</p>
<ul class="org-ul">
<li>Purify会检查程序运行时用到的所有代码，包括程序本身的代码，操作系统提供的代码和第三方库的代码。 
</li>
<li>Purify支持对多进程和对线程的程序进行检测。
</li>
<li>Purify支持windows，linux和UNIX平台。
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 安装</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> 安装license</h3>
<div class="outline-text-3" id="text-2-1">
<ol class="org-ol">
<li>运行脚本license_setup
<pre class="example">
[cnaps2]:/home/cnaps2/PurifyPlus.7.0.1.0-006&gt;./license_setup
</pre>
</li>

<li>按回车继续
<pre class="example">
------------------------------------------------------------------------------
License Setup                  IBM Corporation                 Version: 2.198
------------------------------------------------------------------------------

                              Using License Setup

    You are running the license_setup command as cnaps2.

    Output from license_setup will be copied to a log file.  When you exit
    license_setup or license_setup completes, the location of the log file
    is displayed.

    The -help option can be used to display license_setup command line options.
    All of your inputs will be saved for future runs of license_setup.

    You can enter a q, q! or ? at any prompt:
    q    Will save your inputs and quit license_setup.
    q!   Quit license_setup without saving your inputs.
         Note that the 'Rational' directory is always saved.
    ?    Get help on the current prompt.

    Press the Enter key to continue, q to quit license_setup:
</pre>
</li>
<li>按回车继续
<pre class="example">
    Rational PurifyPlus for Linux and UNIX - Enter Install Location

Enter the location to install IBM Rational products.
This will be referred to as the 'Rational' directory.
In 'Rational' directory, license_setup will create a releases
directory to keep all of the products by name and version.

For example, in 'Rational'/releases, this install will
create a 'PurifyPlus.7.0.1.0-006' directory to install
Rational PurifyPlus for Linux and UNIX 7.0.1.0-006.

The 'Rational' directory must be accessible from
every machine where you plan to run these IBM Rational products.
The 'Rational' directory path must be identical on each machine.
Thus, an automount path like /tmp_mnt/rational should not be used
because you cannot access this directory from every machine.

Checking for 'Rational' directories..  None found.

Press the Enter key to continue, q to quit license_setup:
</pre>
</li>

<li>输入安装将要安装Purify的目录
<pre class="example">
    Rational PurifyPlus for Linux and UNIX - Enter Install Location

Enter the location to install IBM Rational products.
This will be referred to as the 'Rational' directory.
In 'Rational' directory, license_setup will create a releases
directory to keep all of the products by name and version.

For example, in 'Rational'/releases, this install will
create a 'PurifyPlus.7.0.1.0-006' directory to install
Rational PurifyPlus for Linux and UNIX 7.0.1.0-006.

The 'Rational' directory must be accessible from
every machine where you plan to run these IBM Rational products.
The 'Rational' directory path must be identical on each machine.
Thus, an automount path like /tmp_mnt/rational should not be used
because you cannot access this directory from every machine.

Checking for 'Rational' directories..  None found.

Press the Enter key to continue, q to quit license_setup: 

Enter 'Rational' directory: /home/cnaps2
</pre>
</li>

<li>按1接收许可协议
<pre class="example">
          Initializing AIX JRE to display license agreement...
    Done.

    Please ignore the messages related to 'Could not lock System prefs.'
    It is a known issue with the JRE on AIX.

    Running LAP Tool:
/home/cnaps2/releases/jre142.aix/jre/bin/java -classpath extras/LAP/lib/lapapp.jar:extras/LAP/lib/i18n.jar:/home/cnaps2/sqllib/java/db2java.zip:/home/cnaps2/sqllib/java/sqlj.zip:/home/cnaps2/sqllib/function:/home/cnaps2/sqllib/java/db2jcc_license_cu.jar:/home/cnaps2/sqllib/tools/clpplus.jar:/home/cnaps2/sqllib/tools/antlr-3.2.jar:/home/cnaps2/sqllib/tools/jline-0.9.93.jar:/home/cnaps2/sqllib/java/db2jcc.jar:. com.ibm.lex.lapapp.LAP -l extras/LAP/LA_files -text_only -s /home/cnaps2/releases/PurifyPlus.7.0.1.0-006
------------------------------------------------------------------------------
重要信息：请仔细阅读

下面提供了两个许可协议。

1. 评估程序的国际许可协议
2. 国际程序许可协议

如果被许可方为了生产性使用目的（而不是为了评估、测试、试用“先试后
买”或演示）获得本程序，单击下面的“接受”按钮即表示被许可方接受 
国际程序许可协议，且不作任何修改。

如果被许可方为了评估、测试、试用“先试后买”或演示（统称为“评
估”）目的获得本程序：单击下面的“接受”按钮即表示被许可方同时接受
（i）评估程序的国际许可协议（“评估许可”），且不作任何修改；和
（ii）国际程序许可协议（“IPLA”），且不作任何修改。


按 Enter 键继续查看本许可协议或按 "1" 接受本协议，按 
"2" 拒绝本协议，按 "3" 打印本协议，按 "5" 用英语查
看，或按 "99" 回到上一屏幕。
1
</pre>
</li>

<li>按1选择Rational PurifyPlus for Linux and UNIX 
<pre class="example">
          cnaps2 accepts the license agreement on 公元2014年07月31日  星期四  17时25分22秒.
------------------------------------------------------------------------------
                    Rational PurifyPlus for Linux and UNIX 
               Product and License Configuration Selection Menu 

    Make a selection that best describes your desired license set up.

    Enter option 1 if you are doing license set up for:
      Rational PurifyPlus for Linux and UNIX

    Enter option 2 if you are doing license set up for:
      Rational Purify/Quantify/PureCoverage

    You can only select one item from the list.
    These products require FLEXlm licensing.  Enter option 'e' to see the
    specific FLEXlm licenses for each product.

        PurifyPlus or Individual License Configuration:
    1)  Rational PurifyPlus for Linux and UNIX 
    2)  Rational Purify/Quantify/PureCoverage Individual Licensing 
    3)  License setup only - IBM Rational products 

    e)  Explain what licenses are needed for each product.
    d)  Download the latest version of the license_setup command from
        ftp.software.ibm.com and run it.
    b)  Back to the previous menu.
    q)  Quit license_setup.  Enter q! to quit without saving your inputs.
    ?)  Help.

    Enter option: [e] 1
</pre>
</li>

<li>按2选择设置license文件
<pre class="example">
    Enter option: [e] 1

    Installing: FLEXlm 11.8 for Solaris SPARC...
    from: /home/cnaps2/PurifyPlus.7.0.1.0-006/extras/flexlm.sol
      to: /home/cnaps2/base/cots/flexlm.11.8/sun4_solaris2

    Installing: FLEXlm 11.8 for Solaris x64...
    from: /home/cnaps2/PurifyPlus.7.0.1.0-006/extras/flexlm.solaris_x64
      to: /home/cnaps2/base/cots/flexlm.11.8/solaris_x64

    Installing: FLEXlm 11.8 for AIX...
    from: /home/cnaps2/PurifyPlus.7.0.1.0-006/extras/flexlm.aix
      to: /home/cnaps2/base/cots/flexlm.11.8/rs6k_aix

    Installing: FLEXlm 11.8 for Linux...
    from: /home/cnaps2/PurifyPlus.7.0.1.0-006/extras/flexlm.i386_linux2
      to: /home/cnaps2/base/cots/flexlm.11.8/i386_linux2
------------------------------------------------------------------------------

                      PurifyPlus - Licensing Options Menu

    Select one of the following 2 licensing options.

     1)  Use an existing IBM Rational license file (permanent or temporary) or license
         server for PurifyPlus 7.0.1.0-006.
     2)  Set up a license server using a permanent or term-license-agreement (TLA) license.
         You need a .upd license file to import into license_setup.

     b)  Back to the previous menu.
     e)  Explain the licensing options in more detail.
     q)  Quit license_setup.  Enter q! to quit without saving your inputs.

    Enter license option: [e] 2
</pre>
</li>

<li>输入license文件的路径
<pre class="example">
  ------------------------------------------------------------------------------

                      PurifyPlus - Import Licenses

The import file you specify should be from a file you saved from an
e-mail message you received from IBM.  This is not the
license file license_setup will set up.  It is the license information this
program will import to make decisions about what product(s) you
have licensed and how the licenses should be set up with as a FLEXlm
license server.

The file is called something like license_for_server.upd.
The file must contain FLEXlm SERVER and INCREMENT lines for
PurifyPlus.

Currently, license_setup cannot import a redundant server license file.

If you do not have a .upd file to import licenses from, enter none.

File to import from: [none] /home/cnaps2/PurifyPlus.7.0.1.0-006/IBM.Rational.PurifyPlus.v7.1.lic.eval.upd
</pre>
</li>

<li>选择1检查license文件
<pre class="example">
                        PurifyPlus - License Check Menu

---&gt; 1)  Check license keys in:
         /home/cnaps2/PurifyPlus.7.0.1.0-006/IBM.Rational.PurifyPlus.v7.1.lic.eval.upd
         Will check for these licenses:

License Feature                  Description
PurifyPlusUNIX                   Rational PurifyPlus for UNIX
DevelopmentStudioUNIX            Rational Suite DevelopmentStudio for UNIX
DevelopmentStudioUNIXRT          Rational Suite DevelopmentStudio RealTime for
                                   UNIX
purecov                          Rational PureCoverage for UNIX
purify                           Rational Purify for UNIX
quantify                         Rational Quantify for UNIX 

     The license server is not needed for uncounted licenses:

     2)  No need to start or restart the license server.

     3)  No need to check license server using lmstat--licenses are uncounted.

     4)  License settings for PurifyPlus up-to-date.

     b)  Back to the previous menu.
     q)  Quit license_setup.  Enter q! to quit without saving your inputs.
     ?)  Help.

    Enter menu option: [1]
</pre>
</li>

<li>license文件检查通过后按回车继续
<pre class="example">
    Will check for these specific licenses:

License Feature                  Description
PurifyPlusUNIX                   Rational PurifyPlus for UNIX
DevelopmentStudioUNIX            Rational Suite DevelopmentStudio for UNIX
DevelopmentStudioUNIXRT          Rational Suite DevelopmentStudio RealTime for
								   UNIX
purecov                          Rational PureCoverage for UNIX
purify                           Rational Purify for UNIX
quantify                         Rational Quantify for UNIX

    Searching for 'ibmratl' specific license keys in:
      /home/cnaps2/PurifyPlus.7.0.1.0-006/IBM.Rational.PurifyPlus.v7.1.lic.eval.upd
    No ibmratl specific licenses found.

    Searching for 'rational' specific license keys...
    One rational specific license found.

    All 'rational' license keys are okay in:
      /home/cnaps2/PurifyPlus.7.0.1.0-006/IBM.Rational.PurifyPlus.v7.1.lic.eval.upd

    Searching for 'telelogic' specific license keys...
    No telelogic specific licenses found.

    Press the Enter key to continue, q to quit license_setup:
</pre>
</li>

<li>按q退出,自此license安装完毕 
<pre class="example">
                        PurifyPlus - License Check Menu

     1)  Check license keys in:
         /home/cnaps2/PurifyPlus.7.0.1.0-006/IBM.Rational.PurifyPlus.v7.1.lic.eval.upd 

     The license server is not needed for uncounted licenses:

     2)  No need to start or restart the license server.

     3)  No need to check license server using lmstat--licenses are uncounted.

     4)  License settings for PurifyPlus up-to-date.

     b)  Back to the previous menu.
---&gt; q)  Quit license_setup.  Enter q! to quit without saving your inputs.
     ?)  Help.

    Enter menu option: [q]
</pre>
</li>
</ol>
</div>
</div>
<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> 安装Purify</h3>
<div class="outline-text-3" id="text-2-2">
<ol class="org-ol">
<li>运行rs_install
<pre class="example">
[cnaps2]:/home/cnaps2/PurifyPlus.7.0.1.0-006&gt;./rs_install
------------------------------------------------------------------------------
RS Install                     IBM Corporation                 Version: 2.198
------------------------------------------------------------------------------

                                Using RS Install

    You are running the rs_install command as cnaps2.

    Output from rs_install will be copied to a log file.  When you exit
    rs_install or rs_install completes, the location of the log file
    is displayed.

    The -help option can be used to display rs_install command line options.
    All of your inputs will be saved for future runs of rs_install.

    You can enter a q, q! or ? at any prompt:
    q    Will save your inputs and quit rs_install.
    q!   Quit rs_install without saving your inputs.
         Note that the 'Rational' directory is always saved.
    ?    Get help on the current prompt.

    Press the Enter key to continue, q to quit rs_install:
</pre>
</li>

<li>按回车继续
<pre class="example">
------------------------------------------------------------------------------

        Rational PurifyPlus for Linux and UNIX - Enter Install Location

    Enter the location to install IBM Rational products.
    This will be referred to as the 'Rational' directory.
    In 'Rational' directory, rs_install will create a releases
    directory to keep all of the products by name and version.

    For example, in 'Rational'/releases, this install will
    create a 'PurifyPlus.7.0.1.0-006' directory to install
    Rational PurifyPlus for Linux and UNIX 7.0.1.0-006.

    The 'Rational' directory must be accessible from
    every machine where you plan to run these IBM Rational products.
    The 'Rational' directory path must be identical on each machine.
    Thus, an automount path like /tmp_mnt/rational should not be used
    because you cannot access this directory from every machine.

    Checking for 'Rational' directories..  One found.

    Enter 'Rational' directory: [/home/cnaps2]
</pre>
</li>

<li>输入安装目录
<pre class="example">
Enter 'Rational' directory: [/home/cnaps2] /home/cnaps2
</pre>
</li>

<li>选择1Rational PurifyPlus for Linux and UNIX 
<pre class="example">
    cnaps2 accepted the license agreement on 公元2014年07月31日  星期四  17时25分22秒.
------------------------------------------------------------------------------
                    Rational PurifyPlus for Linux and UNIX 
               Product and License Configuration Selection Menu 

    Make a selection that best describes your desired installation.

    Enter option 1 if you are installing and have a license for:
      Rational PurifyPlus for Linux and UNIX

    Enter option 2 if you are installing and have a license for:
      Rational Purify/Quantify/PureCoverage

    You can only select one item from the list.
    These products require FLEXlm licensing.  Enter option 'e' to see the
    specific FLEXlm licenses for each product.

        PurifyPlus or Individual License Configuration:
--&gt; 1)  Rational PurifyPlus for Linux and UNIX 
    2)  Rational Purify/Quantify/PureCoverage Individual Licensing 
    3)  License setup only - IBM Rational products 

    e)  Explain what licenses are needed for each product.
    d)  Download the latest version of the rs_install command from
        ftp.software.ibm.com and run it.
    b)  Back to the previous menu.
    q)  Quit rs_install.  Enter q! to quit without saving your inputs.
    ?)  Help.

    Enter option: [1] 1
</pre>
</li>

<li>输入yes,表示使用之前选定的license文件
<pre class="example">
    Installed: FLEXlm 11.8 for Solaris SPARC

    Installed: FLEXlm 11.8 for Solaris x64

    Installed: FLEXlm 11.8 for AIX

    Installed: FLEXlm 11.8 for Linux

    Installed: FLEXlm 11.8 for Solaris SPARC

    Installed: FLEXlm 11.8 for Solaris x64

    Installed: FLEXlm 11.8 for AIX

    Installed: FLEXlm 11.8 for Linux

    Checking if PurifyPlus license is configured:
Rational PurifyPlus for UNIX
      yes: /home/cnaps2/PurifyPlus.7.0.1.0-006/IBM.Rational.PurifyPlus.v7.1.lic.eval.upd  (Has product licenses)

    Found one license file:

    /home/cnaps2/PurifyPlus.7.0.1.0-006/IBM.Rational.PurifyPlus.v7.1.lic.eval.upd contains:
    License: PurifyPlusUNIX  Evaluation key expires: 15-aug-2014  

    Would you like to configure PurifyPlus
    to use this license file? [yes] yes
</pre>
</li>

<li>输入1,安装默认组件
<pre class="example">
                 PurifyPlus - Typical/Custom Install Preference

    Choose the install option you prefer:

---&gt; 1)  Typical      Install recommended product components.

     2)  Custom       Select specific product components to install.

     b)  Back to the previous menu.
     f)  Forward to install and post-install PurifyPlus now.
     q)  Quit rs_install.  Enter q! to quit without saving your inputs.
     ?)  Help.

    Enter install preference: [1]
</pre>
</li>

<li>选择f,表示确定
<pre class="example">
------------------------------------------------------------------------------

                 PurifyPlus - Typical/Custom Install Preference

    Choose the install option you prefer:

     1)  Typical      Install recommended product components.

     2)  Custom       Select specific product components to install.

    You have chosen to do a typical install.

     b)  Back to the previous menu.
---&gt; f)  Forward to install and post-install PurifyPlus now.
     q)  Quit rs_install.  Enter q! to quit without saving your inputs.
     ?)  Help.

    Enter install preference: [f]
</pre>
</li>

<li>Purify会自动检测操作系统,并安装相应版本的程序
<pre class="example">
------------------------------------------------------------------------------

                              Documentation Table

    The docs/ directory on the release media contains the on-line
    documentation for the product.  This may include the installation
    guide, release note, getting started docs or on-line help.

         Install?   Size (KB)  Product Documentation
         --------   ---------  ---------------------
     1)       yes       14164  Documents in HTML. (Documentation)
     2)       yes        3756  Documents for Adobe Acrobat reader. (Documentation)
     3)       yes           1  Rs Help List (Documentation)
         --------   ---------  ---------------------
              all       17921  Total (does not account for documents
                                      already installed.)

    Updating:   /home/cnaps2/config/PurifyPlus_License_Map [rev 198]
Rational PurifyPlus for UNIX
------------------------------------------------------------------------------

                           PurifyPlus - Product Table

    Use the custom install preference if you want to override the
    default install shown in this table.

         Install?   Size (KB)  PurifyPlus
         --------   ---------  ----------
     1)       yes      160058  + Purify for AIX 7.0.1.0-006
     2)       yes      118637  + PureCoverage for AIX 7.0.1.0-006
     3)       yes      105682  + Quantify for AIX 7.0.1.0-006
     4)        no          --  ~ Purify for Solaris SPARC 7.0.1.0-006
     5)        no          --  ~ PureCoverage for Solaris SPARC 7.0.1.0-006
     6)        no          --  ~ Quantify for Solaris SPARC 7.0.1.0-006
     7)        no          --  ~ Purify for Solaris x64 7.0.1.0-006
     8)        no          --  ~ PureCoverage for Solaris x64 7.0.1.0-006
     9)        no          --  ~ Quantify for Solaris x64 7.0.1.0-006
    10)        no          --  ~ Purify for Linux 7.0.1.0-006
    11)        no          --  ~ PureCoverage for Linux 7.0.1.0-006
    12)        no          --  ~ Quantify for Linux 7.0.1.0-006
         --------   ---------  ----------
           custom      384377    Total 
                               + This product is licensed. 
                               ~ Product platform mismatch.  

    Installing: PurifyPlus 7.0.1.0-006...
    into: /home/cnaps2
    size: 402298 KB  (product with documentation)

    Installed: FLEXlm 11.8 for Solaris SPARC

    Installed: FLEXlm 11.8 for Solaris x64

    Installed: FLEXlm 11.8 for AIX

    Installed: FLEXlm 11.8 for Linux

    Setting release area to be user and group writable:
chmod -R u+w,g+w /home/cnaps2/releases/PurifyPlus.7.0.1.0-006

    Installing: Rational PurifyPlus for Linux and UNIX 7.0.1.0-006 Install Data...
    from: /home/cnaps2/PurifyPlus.7.0.1.0-006/extras/install_data
      to: /home/cnaps2/releases/PurifyPlus.7.0.1.0-006/extras/install_data

    Installing: /home/cnaps2/config/uninstall [rev 94]

    Installing: /home/cnaps2/config/templates2.ini [rev 23]

    Installing: Rational PurifyPlus for Linux and UNIX 7.0.1.0-006 Tools...
    from: /home/cnaps2/PurifyPlus.7.0.1.0-006/extras/bin
      to: /home/cnaps2/releases/PurifyPlus.7.0.1.0-006/extras/bin

    Installing: Documents in HTML. (Documentation)
    from: /home/cnaps2/PurifyPlus.7.0.1.0-006/docs
      to: /home/cnaps2/releases/PurifyPlus.7.0.1.0-006/docs
    Installing: html...
    Installing: pdf...
    Installing: rs_help_list...

    Installing Purify for AIX 7.0.1.0-006 (160058 KB)...
    from: /home/cnaps2/PurifyPlus.7.0.1.0-006/products/purify/aix/7.0.1.0-006
      to: /home/cnaps2/releases/purify.aix.7.0.1.0-006
    Installing: purify.tar.gz file for AIX

    Installing PureCoverage for AIX 7.0.1.0-006 (118637 KB)...
    from: /home/cnaps2/PurifyPlus.7.0.1.0-006/products/purecov/aix/7.0.1.0-006
      to: /home/cnaps2/releases/purecov.aix.7.0.1.0-006
    Installing: purecov.tar.gz file for AIX

    Installing Quantify for AIX 7.0.1.0-006 (105682 KB)...
    from: /home/cnaps2/PurifyPlus.7.0.1.0-006/products/quantify/aix/7.0.1.0-006
      to: /home/cnaps2/releases/quantify.aix.7.0.1.0-006
    Installing: quantify.tar.gz file for AIX

      Not installing Purify for Solaris SPARC 7.0.1.0-006.

      Not installing PureCoverage for Solaris SPARC 7.0.1.0-006.

      Not installing Quantify for Solaris SPARC 7.0.1.0-006.

      Not installing Purify for Solaris x64 7.0.1.0-006.

      Not installing PureCoverage for Solaris x64 7.0.1.0-006.

      Not installing Quantify for Solaris x64 7.0.1.0-006.

      Not installing Purify for Linux 7.0.1.0-006.

      Not installing PureCoverage for Linux 7.0.1.0-006.

      Not installing Quantify for Linux 7.0.1.0-006.

    Installing: /home/cnaps2/config/make_bin_links.pplus [rev 1]

    Installing: /home/cnaps2/config/purifyplus_update_setup [rev 12]
aix_64

    Configuring Purify 7.0.1.0-006 131211 AIX in:
      /home/cnaps2/releases/purify.aix.7.0.1.0-006

------------------------------------------------------------------------------

    Purify Cache Directory Configuration
    ------------------------------------
    To improve build-time performance, instrumented versions of
    libraries and object files are cached.  A file is written to a
    global cache directory if the file's original directory is not
    writable.

    By default, the cache directory is created under the Purify
    install directory.  You do not need to change this unless the
    install file system is not writable or does not have enough free
    space.  Rational recommends 256000 KB be available, but
    requirements can vary significantly from installation to
    installation.

    The specified directory must already exist and be writable,
    or it must be possible for this program to create it.  The
    directory name must be fully-qualified from /.

    Enter the Purify cache directory
    : [/home/cnaps2/releases/purify.aix.7.0.1.0-006/cache] 

------------------------------------------------------------------------------

    Purify Rational ClearQuest Integration Configuration
    ----------------------------------------------------
    Purify supports an integration with Rational ClearQuest
    which allows you to file change requests on Purify detected
    errors from within the Purify GUI.  If you have Rational ClearQuest
    installed, you can set up site-wide defaults for this
    integration.  It is possible to configure some other system.
    You need to configure any other change request system manually.
    Refer to online help system for the steps to configure something
    other than ClearQuest (look for ClearQuest in the index).

    Set up Rational ClearQuest integration? [no] 
    Running Purify self-test. This may take 1-2 minutes...

Testing purify in /home/cnaps2/releases/purify.aix.7.0.1.0-006

Looking for compiler..
Testing 32-bit purify with dynamic linking using /usr/vac/bin/cc..
ld：0711-317 错误：未定义的符号：.purify_is_running
ld：0711-345 使用 -bloadmap 或 -bnoquiet 选项获取详细信息。

*** Warning: Could not compile test program /home/cnaps2/releases/purify.aix.7.0.1.0-006/test/hello_world.c
Please verify compiler installation and try again.
Done
Testing 64-bit purify with dynamic linking using /usr/vac/bin/cc..
Purify 7.0.1.0-006 131211 AIX (64-bit) (C) Copyright IBM Corporation 1992, 2013 All Rights Reserved.  
Instrumenting: test.pure.dynamic.64. libc.a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,....... libcrypt.a,. 
Instrumented test.pure.dynamic.64 is test.pure.dynamic.64.
Done.
............Done

----------------------------------------------------------------
|
|    Warning: 32-bit compiler problem (cc=/usr/vac/bin/cc).
|             Could not build the Purify 32-bit test program.
|    Purify built and ran the 64-bit test program correctly.
|
----------------------------------------------------------------

!!! [Warning 1] Self-test 32-bit could not be run.

    Rational Purify for UNIX - Configuration Summary:
    -------------------------------------------------
    License source: (status: PASSED)
      /home/cnaps2/PurifyPlus.7.0.1.0-006/IBM.Rational.PurifyPlus.v7.1.lic.eval.upd
    Installation location:
      /home/cnaps2/releases/purify.aix.7.0.1.0-006
    Documentation location:   UI/html -&gt;
            /home/cnaps2/releases/PurifyPlus.7.0.1.0-006/docs/html/purify
    Cache location:
      /home/cnaps2/releases/purify.aix.7.0.1.0-006/cache
    Change Request Management command:
      &lt;Not Set&gt;
    Self-test:
      COULD-NOT-RUN (32-bit).
      PASSED (64-bit).  Run by cnaps2 on 公元2014年07月31日  星期四  17时46分04秒

    purify.configure completed: No errors, 1 warning (!!!).
aix_64

    Configuring PureCoverage 7.0.1.0-006 131211 AIX in:
      /home/cnaps2/releases/purecov.aix.7.0.1.0-006

------------------------------------------------------------------------------

    PureCoverage Cache Directory Configuration
    ------------------------------------------
    To improve build-time performance, instrumented versions of
    libraries and object files are cached.  A file is written to a
    global cache directory if the file's original directory is not
    writable.

    By default, the cache directory is created under the PureCoverage
    install directory.  You do not need to change this unless the
    install file system is not writable or does not have enough free
    space.  Rational recommends 256000 KB be available, but
    requirements can vary significantly from installation to
    installation.

    The specified directory must already exist and be writable,
    or it must be possible for this program to create it.  The
    directory name must be fully-qualified from /.

    Enter the PureCoverage cache directory
    : [/home/cnaps2/releases/purecov.aix.7.0.1.0-006/cache] 

------------------------------------------------------------------------------

    PureCoverage Rational ClearQuest Integration Configuration
    ----------------------------------------------------------
    PureCoverage supports an integration with Rational ClearQuest
    which allows you to file change requests on PureCoverage detected
    errors from within the PureCoverage GUI.  If you have Rational ClearQuest
    installed, you can set up site-wide defaults for this
    integration.  It is possible to configure some other system.
    You need to configure any other change request system manually.
    Refer to online help system for the steps to configure something
    other than ClearQuest (look for ClearQuest in the index).

    Set up Rational ClearQuest integration? [no] 

    PureCoverage contains some scripts that are written in Perl.

    Note that only the perl executable is contained in this release
    and not the entire Perl distribution.  For information on how
    to obtain and build the entire Perl distribution please read

        &lt;purecov-home&gt;/PERL/README.perl

    Running PureCoverage self-test. This may take 1-2 minutes...

Testing purecov in /home/cnaps2/releases/purecov.aix.7.0.1.0-006

Looking for compiler..
Testing 32-bit purecov with dynamic linking using /usr/vac/bin/cc..
ld：0711-317 错误：未定义的符号：.purecov_is_running
ld：0711-345 使用 -bloadmap 或 -bnoquiet 选项获取详细信息。

*** Warning: Could not compile test program /home/cnaps2/releases/purecov.aix.7.0.1.0-006/test/hello_world.c
Please verify compiler installation and try again.
Done
Testing 64-bit purecov with dynamic linking using /usr/vac/bin/cc..
PureCoverage 7.0.1.0-006 131211 AIX (64-bit) (C) Copyright IBM Corporation 1992, 2013 All Rights Reserved.  
Instrumenting: test.pure.dynamic.64. libc.a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,....... libcrypt.a,. 
Instrumented test.pure.dynamic.64 is test.pure.dynamic.64.
Done.
............Done

----------------------------------------------------------------
|
|    Warning: 32-bit compiler problem (cc=/usr/vac/bin/cc).
|             Could not build the PureCoverage 32-bit test program.
|    PureCoverage built and ran the 64-bit test program correctly.
|
----------------------------------------------------------------

!!! [Warning 2] Self-test 32-bit could not be run.

    Rational PureCoverage for UNIX - Configuration Summary:
    -------------------------------------------------------
    License source: (status: PASSED)
      /home/cnaps2/PurifyPlus.7.0.1.0-006/IBM.Rational.PurifyPlus.v7.1.lic.eval.upd
    Installation location:
      /home/cnaps2/releases/purecov.aix.7.0.1.0-006
    Documentation location:   UI/html -&gt;
            /home/cnaps2/releases/PurifyPlus.7.0.1.0-006/docs/html/purecov
    Cache location:
      /home/cnaps2/releases/purecov.aix.7.0.1.0-006/cache
    Change Request Management command:
      &lt;Not Set&gt;
    Self-test:
      COULD-NOT-RUN (32-bit).
      PASSED (64-bit).  Run by cnaps2 on 公元2014年07月31日  星期四  17时46分06秒

    purecov.configure completed: No errors, 1 warning (!!!).
aix_64

    Configuring Quantify 7.0.1.0-006 131211 AIX in:
      /home/cnaps2/releases/quantify.aix.7.0.1.0-006

------------------------------------------------------------------------------

    Quantify Cache Directory Configuration
    --------------------------------------
    To improve build-time performance, instrumented versions of
    libraries and object files are cached.  A file is written to a
    global cache directory if the file's original directory is not
    writable.

    By default, the cache directory is created under the Quantify
    install directory.  You do not need to change this unless the
    install file system is not writable or does not have enough free
    space.  Rational recommends 256000 KB be available, but
    requirements can vary significantly from installation to
    installation.

    The specified directory must already exist and be writable,
    or it must be possible for this program to create it.  The
    directory name must be fully-qualified from /.

    Enter the Quantify cache directory
    : [/home/cnaps2/releases/quantify.aix.7.0.1.0-006/cache] 

    Quantify contains some scripts that are written in Perl.

    Note that only the perl executable is contained in this release
    and not the entire Perl distribution.  For information on how
    to obtain and build the entire Perl distribution please read

        &lt;quantify-home&gt;/PERL/README.perl

    Running Quantify self-test. This may take 1-2 minutes...

Testing quantify in /home/cnaps2/releases/quantify.aix.7.0.1.0-006

Looking for compiler..
Testing 32-bit quantify with dynamic linking using /usr/vac/bin/cc..
ld：0711-317 错误：未定义的符号：.quantify_is_running
ld：0711-345 使用 -bloadmap 或 -bnoquiet 选项获取详细信息。

*** Warning: Could not compile test program /home/cnaps2/releases/quantify.aix.7.0.1.0-006/test/hello_world.c
Please verify compiler installation and try again.
Done
Testing 64-bit quantify with dynamic linking using /usr/vac/bin/cc..
Quantify 7.0.1.0-006 131211 AIX (64-bit) (C) Copyright IBM Corporation 1992, 2013 All Rights Reserved.  
Instrumenting: test.pure.dynamic.64. libc.a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,....... libcrypt.a,. 
Instrumented test.pure.dynamic.64 is test.pure.dynamic.64.
Done.
............Done

----------------------------------------------------------------
|
|    Warning: 32-bit compiler problem (cc=/usr/vac/bin/cc).
|             Could not build the Quantify 32-bit test program.
|    Quantify built and ran the 64-bit test program correctly.
|
----------------------------------------------------------------

!!! [Warning 3] Self-test 32-bit could not be run.

    Rational Quantify for UNIX - Configuration Summary:
    ---------------------------------------------------
    License source: (status: PASSED)
      /home/cnaps2/PurifyPlus.7.0.1.0-006/IBM.Rational.PurifyPlus.v7.1.lic.eval.upd
    Installation location:
      /home/cnaps2/releases/quantify.aix.7.0.1.0-006
    Documentation location:   UI/html -&gt;
            /home/cnaps2/releases/PurifyPlus.7.0.1.0-006/docs/html/quantify
    Cache location:
      /home/cnaps2/releases/quantify.aix.7.0.1.0-006/cache
    Self-test:
      COULD-NOT-RUN (32-bit).
      PASSED (64-bit).  Run by cnaps2 on 公元2014年07月31日  星期四  17时46分12秒

    quantify.configure completed: No errors, 1 warning (!!!).

    Creating the common bin directory
    for PurifyPlus 7.0.1.0-006/AIX:
      Creating links for: PurifyPlus
      Creating links for: FLEXlm
      Creating links for: Purify for AIX
      Creating links for: PureCoverage for AIX
      Creating links for: Quantify for AIX

    A common bin directory has been created with links to 35 commands:
      /home/cnaps2/releases/PurifyPlus.7.0.1.0-006/rs6k_aix/bin
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    Add this directory to your command search path in your shell startup file.

    Use these commands:     To start these products:
      purify                  Purify for AIX 7.0.1.0-006
      purecov                 PureCoverage for AIX 7.0.1.0-006
      quantify                Quantify for AIX 7.0.1.0-006

    Creating/updating setup files
    in /home/cnaps2/releases/PurifyPlus.7.0.1.0-006...
         Created: purifyplus_setup.csh in PurifyPlus.7.0.1.0-006
         Created: purifyplus_setup.sh in PurifyPlus.7.0.1.0-006

    You can source the setup file to help you start the programs in this
    install.  If you are installing this for users in addition to yourself
    you will want to have them add one of these commands to their login
    environment.

    Users of csh, tcsh and other csh-compatible shells do this:

source /home/cnaps2/purifyplus_setup.csh

    Users of sh, ksh, bash and other bourne-compatible shells do this:

. /home/cnaps2/purifyplus_setup.sh

------------------------------------------------------------------------------
    The rs_install command completed successfully.
    Defaults saved in:
    /home/cnaps2/config/defaults/rs_install.PurifyPlus.7.0.1.0-006.cnaps2
    rs_install log file:
    /home/cnaps2/releases/PurifyPlus.7.0.1.0-006/rs_install.L2601H8.cnaps2.log

    End of rs_install.
</pre>
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> 使用</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> 查看帮助</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li>使用web浏览器查看帮助文档

<p>
purify －onlinehelp
</p>
</li>

<li>查看完整的在线帮助

<p>
菜单Help&gt;Help topics
</p>

<p>
菜单Help&gt;On window
</p>

<p>
菜单Help&gt;On content
</p>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><a id="ID-93ac52d0-4045-4ed6-93f7-96c94af040aa" name="ID-93ac52d0-4045-4ed6-93f7-96c94af040aa"></a><span class="section-number-3">3.2</span> 使用步骤&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></h3>
<div class="outline-text-3" id="text-3-2">
<ol class="org-ol">
<li>只要将purify放在普通的编译/链接命令前
<div class="org-src-container">

<pre class="src src-sh">purify cc -g hello.c
</pre>
</div>
<p>
若编译和链接是分成不同的步骤分布进行的,则只需要将purify放在链接操作前即可.
</p>
<div class="org-src-container">

<pre class="src src-sh">cc -c -g hello.c
purify cc -g hello.o
</pre>
</div>
</li>
<li>执行编译出来的程序.

<p>
程序会照常运行,并显示Purify Viewer窗口展示找到的BUG.
</p>


<div class="figure">
<p><img src="./data/93/ac52d0-4045-4ed6-93f7-96c94af040aa/Purify_Viewer实例.JPG" alt="Purify_Viewer实例.JPG" />
</p>
</div>

<p>
值得一提的是,Purify在找到BUG后并不会暂停程序的执行,程序的启动,运行,退出与原程序一般无疑.
</p>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><a id="ID-2c4381b6-2469-4402-8398-3f53a541a72c" name="ID-2c4381b6-2469-4402-8398-3f53a541a72c"></a><span class="section-number-3">3.3</span> 查看BUG&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></h3>
<div class="outline-text-3" id="text-3-3">


<div class="figure">
<p><img src="./data/2c/4381b6-2469-4402-8398-3f53a541a72c/Purify_View查看错误操作.JPG" alt="Purify_View查看错误操作.JPG" />
</p>
</div>

<p>
NOTE: Purify Viewer一次只显示一个可执行程序的信息. 它会指明所显示的可执行程序名称,所处于的目录和执行该程序的用户ID
</p>
</div>
</div>
<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><a id="ID-1c0b7a17-9de7-4326-9252-0b63136e8ae9" name="ID-1c0b7a17-9de7-4326-9252-0b63136e8ae9"></a><span class="section-number-3">3.4</span> 定位BUG在源代码中的位置&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></h3>
<div class="outline-text-3" id="text-3-4">


<div class="figure">
<p><img src="./data/1c/0b7a17-9de7-4326-9252-0b63136e8ae9/Purify_Viewer定位BUG.JPG" alt="Purify_Viewer定位BUG.JPG" />
</p>
</div>

<p>
NOTE: 若在编译时使用了-g选项,则Purify View会显示BUG所在的源文件,行号和涉及的变量名. 若没有带-g选项,则只能显示文件名和函数名.
</p>
</div>
</div>
<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5"><a id="ID-ffd8e8dd-f12f-4e99-856c-ed198fb72075" name="ID-ffd8e8dd-f12f-4e99-856c-ed198fb72075"></a><span class="section-number-3">3.5</span> 查找泄漏的内存&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></h3>
<div class="outline-text-3" id="text-3-5">

<p>
当程序退出,Purify会查找泄漏的内存并给出未释放的内存报告.
</p>

<p>
Purify将内存分为三个状态,每个状态都会统计内存块的数量和大小.
</p>
<ul class="org-ul">
<li>Leaked memory

<p>
没有指针指向这块内存
</p>
</li>

<li>Potentially Leaked memory

<p>
没有指针指向这块内存的头部,但是有指针指向这块内存的内部.
</p>
</li>

<li>Memory in use

<p>
有指针指向的内存块(不存在泄漏的情况)
</p>


<div class="figure">
<p><img src="./data/ff/d8e8dd-f12f-4e99-856c-ed198fb72075/Purify_Viewer查找泄漏的内存.JPG" alt="Purify_Viewer查找泄漏的内存.JPG" />
</p>
</div>
</li>
</ul>

<p>
NOTE: 若运行的是一个需要长期不退出的程序,可以在程序尚在运行时,通过单击菜单栏中的`New Leaks tool`按钮来产生内存泄漏的情况报告.
</p>
</div>
</div>
<div id="outline-container-sec-3-6" class="outline-3">
<h3 id="sec-3-6"><a id="ID-2d11f89d-3639-47fa-9254-6daa3662161e" name="ID-2d11f89d-3639-47fa-9254-6daa3662161e"></a><span class="section-number-3">3.6</span> 修改BUG&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></h3>
<div class="outline-text-3" id="text-3-6">
<p>
按下Edit tool按钮(工具栏第5个按钮显示是一支笔写文档)会打开编辑器供你修改源代码
</p>


<div class="figure">
<p><img src="file://e:/我的笔记/Programming/data/2d/11f89d-3639-47fa-9254-6daa3662161e/Purify_Viewer修改BUG.JPG" alt="Purify_Viewer修改BUG.JPG" />
</p>
</div>

<p>
NOTE: 默认情况下,Purify View只显示7行相关的源代码. 但你可以通过修改Xresource来修改显示的行数
</p>
</div>
</div>

<div id="outline-container-sec-3-7" class="outline-3">
<h3 id="sec-3-7"><a id="ID-b5b80225-6185-4567-ac7c-0d7bbd2654ae" name="ID-b5b80225-6185-4567-ac7c-0d7bbd2654ae"></a><span class="section-number-3">3.7</span> 隐藏消息&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></h3>
<div class="outline-text-3" id="text-3-7">
<p>
若检测的程序很大,则可能会产生成百上千的关于BUG的信息报告. 这种情况下,要想快速的定位到最重要的BUG位置,可以隐藏指定类型或来源的信息.
</p>

<p>
在Purify viewer中隐藏消息的方法为:
</p>
<ol class="org-ol">
<li>选择想隐藏的消息
</li>
<li>选择菜单Options&gt;Suppressions

<p>
在Message to suppress处选择要隐藏的消息的类型
</p>

<p>
在Where to suppress处选择要隐藏的消息的来源
</p>

<p>
按下左下方的`Make permanent`按钮会将隐藏配置保持在.purify文件中
</p>

<p>
右下方的`Select File&#x2026;`按钮可以选择保持隐藏配置的.purify文件
</p>


<div class="figure">
<p><img src="./data/b5/b80225-6185-4567-ac7c-0d7bbd2654ae/Purify_Viewer隐藏信息配置.JPG" alt="Purify_Viewer隐藏信息配置.JPG" /> 
</p>
</div>
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> 保存/载入结果</h2>
<div class="outline-text-2" id="text-4">
<p>
Purify可以将检测的结果保存到后缀为.pv的Purify View file中, 也可以从Purify View file中载入检测结果
</p>
</div>
<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> 保存结果</h3>
<div class="outline-text-3" id="text-4-1">
<ol class="org-ol">
<li>选择菜单`File&gt;Save As`
</li>
<li>输入保存的文件名,后缀名使用.pv,表示为Purify view file
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> 载入结果</h3>
<div class="outline-text-3" id="text-4-2">
<p>
有两种方式载入结果文件
</p>
<ol class="org-ol">
<li>从View中选择菜单`File&gt;Open`,打开Purify view file
</li>
<li>在命令行运行:
<div class="org-src-container">

<pre class="src src-sh">purify -view filename.pv
</pre>
</div>
</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> API</h2>
<div class="outline-text-2" id="text-5">
<p>
Purify提供了一系列的API可以插入到源代码中提供更个性化的检测功能. 
</p>

<p>
要使用Purify API,需要include `&lt;purifyhome&gt;/purify.h`并且链接库`&lt;purifyhome/purify_stubs.a&gt;`
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> Purify API简要说明</caption>

<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Commonly used API</th>
<th scope="col" class="left">functions Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">int purify_describe (char *addr)</td>
<td class="left">Prints specific de tails about memory</td>
</tr>

<tr>
<td class="left">int purify_is_running (void)</td>
<td class="left">Returns "TRUE" if the program is instrumented</td>
</tr>

<tr>
<td class="left">int purify_new_inuse (void)</td>
<td class="left">Prints a message on all memory newly in use</td>
</tr>

<tr>
<td class="left">int purify_new_leaks (void)</td>
<td class="left">Prints a message on all new leaks</td>
</tr>

<tr>
<td class="left">int purify_new_fds_inuse (void)</td>
<td class="left">Lists the new open file descriptors</td>
</tr>

<tr>
<td class="left">int purify_printf (char *format, &#x2026;)</td>
<td class="left">Prints formatted text to the Viewer or log-file</td>
</tr>

<tr>
<td class="left">int purify_watch (char *addr)</td>
<td class="left">Watches for memory write ,  malloc, free</td>
</tr>

<tr>
<td class="left">int purify_watch_n (char *addr, int size, char *type)</td>
<td class="left">Watches memory: type = " r", "w", "rw"</td>
</tr>

<tr>
<td class="left">int purify_watch_info (void)</td>
<td class="left">Lists active watchpoints</td>
</tr>

<tr>
<td class="left">int purify_watch_remove (int watchno)</td>
<td class="left">Removes a specified watchpoint</td>
</tr>

<tr>
<td class="left">int purify_what_colors (char *addr, int size)</td>
<td class="left">Prints the color coding of memory</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> 命令选项</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> Build-time options</h3>
<div class="outline-text-3" id="text-6-1">
<p>
在编译时使用build-time options. 例如
</p>
<div class="org-src-container">

<pre class="src src-sh">purify -cache-dir=$<span style="color: #a0522d;">HOME</span>/cache -always-use-cache-dir cc -o hello hello.c
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 2:</span> Build-time options说明</caption>

<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">options</th>
<th scope="col" class="left">说明</th>
<th scope="col" class="left">默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">-always-use-cache-dir</td>
<td class="left">Forces all instrumented object files to be written to the global cache directory</td>
<td class="left">no</td>
</tr>

<tr>
<td class="left">-cache-dir</td>
<td class="left">Specifies the global directory where Purify caches instrumented object files</td>
<td class="left">&lt;purifyhome&gt;/cache</td>
</tr>

<tr>
<td class="left">-ignore-runtime-environment</td>
<td class="left">Prevents the runtime Purify environment from overriding the option values used in building the program</td>
<td class="left">no</td>
</tr>

<tr>
<td class="left">-linker</td>
<td class="left">Sets the alternative linker to build the executables instead of the system default</td>
<td class="left">system-dependent</td>
</tr>

<tr>
<td class="left">-print-home-dir</td>
<td class="left">Prints the name of the directory wher e Purify is installed, then exits</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> Runtime options</h3>
<div class="outline-text-3" id="text-6-2">
<p>
Runtime options除了可以在使用purify时用带option的方式生效,还能通过写到环境变量`PURIFYOPTIONS`中生效.例如
</p>
<div class="org-src-container">

<pre class="src src-sh">setenv PURIFYOPTIONS <span style="color: #8b2252;">"-log-file=mylog.%v.%p &#8216;printenv PURIFYOPTIONS&#8216;"</span>
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 3:</span> 常用Runtime options说明</caption>

<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">选项</th>
<th scope="col" class="left">说明</th>
<th scope="col" class="left">默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">-auto-mount-prefix</td>
<td class="left">Removes the prefix used by file system auto-mounters</td>
<td class="left">/tmp_mnt</td>
</tr>

<tr>
<td class="left">-chain-length</td>
<td class="left">Sets the maximum number of stack frames to print in a report</td>
<td class="left">6</td>
</tr>

<tr>
<td class="left">-fds-in-use-at-exit</td>
<td class="left">Specifies that the file descriptor in us e message be displaye d at program exit</td>
<td class="left">yes</td>
</tr>

<tr>
<td class="left">-follow-child-processes</td>
<td class="left">Controls whether Purify monitors child  processes in an instrumented program</td>
<td class="left">no</td>
</tr>

<tr>
<td class="left">-jit-debug</td>
<td class="left">Enables just-in-time debugging</td>
<td class="left">none</td>
</tr>

<tr>
<td class="left">-leaks-at-exit</td>
<td class="left">Reports all leaked memory at program exit</td>
<td class="left">yes</td>
</tr>

<tr>
<td class="left">-log-file</td>
<td class="left">Writes Purify output to a log file instead of the Viewer  window</td>
<td class="left">stderr</td>
</tr>

<tr>
<td class="left">-messages</td>
<td class="left">Controls display of repeated messages:  "first",  "all" , or in a  "batch" at program exit</td>
<td class="left">first</td>
</tr>

<tr>
<td class="left">-program-name</td>
<td class="left">Specifies the full pathname of  the instrumented program if  argv[ 0] contains an undesirable or incorrect value</td>
<td class="left">argv[ 0]</td>
</tr>

<tr>
<td class="left">-show-directory</td>
<td class="left">Shows the directory path for each file in the call chain, if the information is available</td>
<td class="left">no</td>
</tr>

<tr>
<td class="left">-show-pc</td>
<td class="left">Shows the full pc value in each frame of the call chain</td>
<td class="left">no</td>
</tr>

<tr>
<td class="left">-show-pc-offset</td>
<td class="left">Appends a pc-offset to each function name in the call chain</td>
<td class="left">no</td>
</tr>

<tr>
<td class="left">-view-file</td>
<td class="left">Saves Purify output to a view file ( .pv ) instead of the Viewer .</td>
<td class="left">none</td>
</tr>

<tr>
<td class="left">-user-path</td>
<td class="left">Specifies a list of directories in which to search for programs and source code</td>
<td class="left">none</td>
</tr>

<tr>
<td class="left">-windows</td>
<td class="left">Redirects Purify output to stderr instead of the  Viewer  if -windows=no</td>
<td class="left">none</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: DarkSun</p>
<p class="date">Created: 2014-09-18 星期四 21:26</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.7b)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
